{% extends "base.html" %}
{% block content %}
<h4>{{ 'Editar' if alumno else 'Nuevo' }} Alumno</h4>
<form method="post" class="mt-3">
  <div class="row">
    <div class="col-md-6">
      <div class="mb-2">
        <label class="form-label">Nombre</label>
        <input name="nombre" class="form-control" value="{{ alumno.usuario.nombre if alumno else '' }}" required>
      </div>
      <div class="mb-2">
        <label class="form-label">Email</label>
        <input name="email" type="email" class="form-control" value="{{ alumno.usuario.email if alumno else '' }}" required>
      </div>
      <div class="mb-2">
        <label class="form-label">Contraseña {% if alumno %}(dejar vacío para no cambiar){% endif %}</label>
        <input name="password" type="password" class="form-control" {% if not alumno %}required{% endif %}>
      </div>
    </div>
    <div class="col-md-6">
      <div class="mb-2">
        <label class="form-label">Carrera</label>
        <input name="carrera" class="form-control" value="{{ alumno.carrera if alumno else '' }}">
      </div>
      <div class="mb-2">
        <label class="form-label">Semestre</label>
        <input name="semestre" type="number" min="1" max="14" class="form-control" value="{{ alumno.semestre if alumno else '' }}">
      </div>
      <div class="mb-2">
        <label class="form-label">Proyecto (opcional)</label>
        <select name="proyecto_id" class="form-select">
          <option value="">—</option>
          {% for p in proyectos %}
            {% set sel = (alumno and alumno.proyecto_id==p.id) %}
            <option value="{{ p.id }}" {% if sel %}selected{% endif %}>{{ p.nombre }}</option>
          {% endfor %}
        </select>
      </div>
    </div>
  </div>
  <button class="btn btn-primary">Guardar</button>
  <a class="btn btn-secondary" href="{{ url_for('alum.lista') }}">Cancelar</a>
</form>
{% endblock %}
