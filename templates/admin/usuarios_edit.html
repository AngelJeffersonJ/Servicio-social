{% extends "base.html" %}
{% block title %}Editar usuario{% endblock %}
{% block content %}
<h3 class="mb-3">Editar usuario</h3>

<form method="post" class="card bg-panel border-secondary p-3">
  {{ csrf_token() }}
  <div class="row g-3">
    <div class="col-md-6">
      <label class="form-label">Nombre (mostrar)</label>
      <input name="nombre" class="form-control" value="{{ u.nombre }}" required>
    </div>
    <div class="col-md-6">
      <label class="form-label">Email</label>
      <input name="email" type="email" class="form-control" value="{{ u.email }}" required>
    </div>

    <div class="col-md-4">
      <label class="form-label">Rol</label>
      <select name="role" class="form-select">
        {% for val, label in
        [('alumno','Alumno'),('laboratorista','Laboratorista'),('jefe','Jefe'),('admin','Administrador')] %}
        <option value="{{ val }}" {% if u.rol==val %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-4">
      <label class="form-label">Departamento (opcional)</label>
      <select name="departamento_id" class="form-select">
        <option value="">—</option>
        {% for d in deps %}
        <option value="{{ d.id }}" {% if u.departamento_id==d.id %}selected{% endif %}>{{ d.nombre }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-4">
      <label class="form-label">Nueva contraseña (opcional)</label>
      <input name="password" type="password" class="form-control" placeholder="dejar vacío para no cambiar">
    </div>

    <!-- Datos alumno -->
    <div class="col-12">
      <hr>
    </div>
    <div class="col-md-3">
      <label class="form-label">Apellido paterno</label>
      <input name="apellido_paterno" class="form-control" value="{{ u.ap_paterno or '' }}">
    </div>
    <div class="col-md-3">
      <label class="form-label">Apellido materno</label>
      <input name="apellido_materno" class="form-control" value="{{ u.ap_materno or '' }}">
    </div>
    <div class="col-md-3">
      <label class="form-label">No. control</label>
      <input name="no_control" class="form-control" value="{{ u.no_control or '' }}">
    </div>
    <div class="col-md-3">
      <label class="form-label">Carrera</label>
      <input name="carrera" class="form-control" value="{{ u.carrera or '' }}">
    </div>

    <!-- Datos staff -->
    <div class="col-md-6">
      <label class="form-label">Cargo / Puesto (no alumnos)</label>
      <input name="cargo" class="form-control" value="{{ u.cargo or '' }}">
    </div>
  </div>

  <div class="mt-3 d-flex gap-2">
    <button class="btn btn-primary">Guardar cambios</button>
    <a class="btn btn-outline-secondary" href="{{ url_for('admin.usuarios_list') }}">Volver</a>
  </div>
</form>
{% endblock %}