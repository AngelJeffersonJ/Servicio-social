{% extends "base.html" %}
{% block content %}
<h3 class="mb-3">Nuevo Proyecto</h3>

<form method="post" class="card bg-secondary-subtle text-dark">
    <div class="card-body">
        <div class="row g-3">
            <div class="col-md-6">
                <label class="form-label">Nombre del proyecto</label>
                <input name="nombre" class="form-control" required>
            </div>

            <div class="col-md-3">
                <label class="form-label">Departamento</label>
                <select name="departamento_id" class="form-select">
                    <option value="">-- Selecciona --</option>
                    {% for d in departamentos %}
                    <option value="{{ d.id }}">{{ d.nombre }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-md-3">
                <label class="form-label">Responsable (usuario)</label>
                <select name="responsable_id" class="form-select">
                    <option value="">-- Selecciona --</option>
                    {% for u in responsables %}
                    <option value="{{ u.id }}">{{ u.nombre }} ({{ u.rol }})</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-12">
                <hr>
                <h5>Datos para formatos (se auto-llenan en los DOCX)</h5>
            </div>

            <!-- Responsable / contacto -->
            <div class="col-md-4">
                <label class="form-label">Nombre del responsable</label>
                <input name="NOMBRE_RESPONSABLE" class="form-control"
                    placeholder="Si el responsable no es usuario del sistema">
            </div>
            <div class="col-md-4">
                <label class="form-label">Cargo del responsable</label>
                <input name="CARGO_RESPONSABLE" class="form-control">
            </div>
            <div class="col-md-4">
                <label class="form-label">Área / Departamento (texto)</label>
                <input name="AREA_RESPONSABLE" class="form-control" placeholder="Ej. Gestión Tecnológica y Vinculación">
            </div>
            <div class="col-md-4">
                <label class="form-label">Teléfono responsable</label>
                <input name="TELEFONO_RESPONSABLE" class="form-control">
            </div>
            <div class="col-md-4">
                <label class="form-label">Correo responsable</label>
                <input name="CORREO_RESPONSABLE" class="form-control" type="email">
            </div>
            <div class="col-md-4">
                <label class="form-label">Horario de visita</label>
                <input name="HORARIO_RESPONSABLE" class="form-control">
            </div>

            <!-- Proyecto -->
            <div class="col-md-3">
                <label class="form-label">Periodo</label>
                <input name="Periodo" class="form-control" placeholder="Ene-Jun 2025">
            </div>
            <div class="col-md-3">
                <label class="form-label"># personas beneficiadas</label>
                <input name="numero_personas" type="number" class="form-control" min="0">
            </div>
            <div class="col-md-3">
                <label class="form-label"># comunidades beneficiadas</label>
                <input name="num_comunidades" type="number" class="form-control" min="0">
            </div>
            <div class="col-md-3">
                <label class="form-label"># estudiantes solicitados</label>
                <input name="num_estudiantes" type="number" class="form-control" min="1">
            </div>

            <!-- Impactos -->
            <div class="col-12">
                <label class="form-label">Impacto del proyecto</label>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="op1" name="opcion1">
                    <label class="form-check-label" for="op1">Problemas prioritarios del país</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="op2" name="opcion2">
                    <label class="form-check-label" for="op2">Inclusión e igualdad</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="op3" name="opcion3">
                    <label class="form-check-label" for="op3">Medio ambiente y sustentabilidad</label>
                </div>
            </div>

            <!-- Turnos -->
            <div class="col-md-6">
                <label class="form-label d-block">Turno de servicio social</label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="t1" name="turno1">
                    <label class="form-check-label" for="t1">Matutino</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="t2" name="turno2">
                    <label class="form-check-label" for="t2">Vespertino</label>
                </div>
            </div>

            <!-- Carreras -->
            <div class="col-12">
                <label class="form-label d-block">Carreras solicitadas</label>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-check"><input class="form-check-input" type="checkbox" name="carrera1"
                                id="c1"><label class="form-check-label" for="c1">ITI / TIC</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" name="carrera2"
                                id="c2"><label class="form-check-label" for="c2">LA</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" name="carrera3"
                                id="c3"><label class="form-check-label" for="c3">IQ</label></div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check"><input class="form-check-input" type="checkbox" name="carrera4"
                                id="c4"><label class="form-check-label" for="c4">II</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" name="carrera5"
                                id="c5"><label class="form-check-label" for="c5">IM</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" name="carrera6"
                                id="c6"><label class="form-check-label" for="c6">IE</label></div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check"><input class="form-check-input" type="checkbox" name="carrera7"
                                id="c7"><label class="form-check-label" for="c7">IEL</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" name="carrera8"
                                id="c8"><label class="form-check-label" for="c8">IGE</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" name="carrera9"
                                id="c9"><label class="form-check-label" for="c9">IMat</label></div>
                    </div>
                </div>
            </div>

            <!-- Objetivo / Metas -->
            <div class="col-md-6">
                <label class="form-label">Objetivo del proyecto</label>
                <textarea name="objetivos_proyecto" class="form-control" rows="3"></textarea>
            </div>
            <div class="col-md-6">
                <label class="form-label">Metas</label>
                <textarea name="metas_proyecto" class="form-control" rows="3"></textarea>
            </div>

            <!-- Área de conocimiento -->
            <div class="col-12">
                <label class="form-label">Área del conocimiento</label>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-check"><input class="form-check-input" type="checkbox" name="area1"
                                id="a1"><label class="form-check-label" for="a1">Ciencias Agropecuarias</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" name="area2"
                                id="a2"><label class="form-check-label" for="a2">Ciencias de la Salud</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" name="area3"
                                id="a3"><label class="form-check-label" for="a3">Naturales y Exactas</label></div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check"><input class="form-check-input" type="checkbox" name="area4"
                                id="a4"><label class="form-check-label" for="a4">Sociales y Administrativas</label>
                        </div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" name="area5"
                                id="a5"><label class="form-check-label" for="a5">Educación y Humanidades</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" name="area6"
                                id="a6"><label class="form-check-label" for="a6">Ingeniería y Técnica</label></div>
                    </div>
                </div>
            </div>

            <!-- Cronograma (5 filas x 12 meses) -->
            <div class="col-12"><label class="form-label">Cronograma de actividades</label></div>
            {% for i in range(1,6) %}
            <div class="col-12 border rounded p-3 mb-2">
                <div class="row g-2 align-items-center">
                    <div class="col-md-3">
                        <input class="form-control" name="actividad{{ i }}" placeholder="Actividad {{ i }}">
                    </div>
                    {% for mes in
                    ['enero','febrero','marzo','abril','mayo','junio','julio','agosto','septiembre','octubre','noviembre','diciembre']
                    %}
                    <div class="col-6 col-md-1">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="{{ mes }}{{ i }}"
                                id="{{ mes }}{{ i }}">
                            <label class="form-check-label small" for="{{ mes }}{{ i }}">{{ mes[:3] | capitalize
                                }}</label>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="card-footer text-end">
        <button class="btn btn-primary">Guardar</button>
    </div>
</form>
{% endblock %}